{"version":3,"sources":["api/userAPI.js","api/config.js","assets/preloader.svg","serviceWorker.js","redux/app-reducer.js","redux/redux-store.js","components/Header/Header.jsx","components/Header/HeaderContainer.jsx","App.js","index.js","redux/auth-reducer.js","components/common/Preloader/Preloader.jsx","redux/profile-reducer.js","redux/dialogs-reducer.js","utils/object-helpers.js","redux/users-reducer.js"],"names":["instance","axios","create","withCredentials","baseURL","headers","userAPI","getUsers","currentPage","pageSiza","get","then","response","follow","userId","post","unfollow","delete","getProfile","profileAPI","getStatus","putStatus","status","put","authAPI","me","login","email","password","rememberMe","logout","module","exports","Boolean","window","location","hostname","match","initialState","initialized","appReducer","state","action","type","reducers","combineReducers","profilePage","profileReducer","dialogsPage","dialogsReducer","usersPage","usersReducer","auth","authReducer","form","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","Header","props","Navbar","bg","variant","expand","Container","Brand","href","Toggle","aria-controls","Nav","className","Item","Link","as","NavLink","to","Collapse","Text","isAuth","HeaderContainer","this","React","Component","connect","getAuthUserData","Music","lazy","News","ProfileContainer","DialogsContainer","UsersContainer","LoginPage","LogoutPage","App","initializeApp","fallback","Preloader","path","render","AppContainer","withRouter","dispatch","promise","Promise","all","MainApp","rerenderEntireTree","ReactDOM","document","getElementById","getState","subscribe","navigator","serviceWorker","ready","registration","unregister","SET_USER_DATA","setAuthUserData","payload","a","data","resultCode","error","messages","length","stopSubmit","_error","src","preloader","alt","posts","id","message","likesCount","friends","name","profile","setStatus","getUserProfile","updateStatus","addPost","newPostText","addPostCreator","stateCopy","likeCount","filter","p","postId","dialogs","addNewMessageCreator","newMessageBody","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","users","pageSize","totalUsersCount","isFetching","followingInProgress","followUnfollowFlow","apiMethod","actionCreator","setFollowingInProgress","followSuccess","unfollowSuccess","setUsers","setCurrentPage","setTotalUsers","setIsFetching","requestUsers","page","totalCount","bind","followed"],"mappings":"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","file":"static/js/main.334fc8f3.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { apiKey } from './config';\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        'API-KEY': apiKey\r\n    }\r\n});\r\n\r\n\r\nexport const userAPI = {\r\n    getUsers(currentPage = 1, pageSiza = 10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSiza}`).then(response => {\r\n            return response\r\n        })\r\n    },\r\n\r\n    follow(userId) {\r\n        return instance.post(`follow/${userId}`).then(response => {\r\n            return response\r\n        })\r\n    },\r\n\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/${userId}`).then(response => {\r\n            return response\r\n        })\r\n    },\r\n\r\n    getProfile(userId) {\r\n        return profileAPI.getProfile(userId);\r\n    }\r\n};\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get('profile/' + userId);\r\n    },\r\n\r\n    getStatus(userId) {\r\n        return instance.get('profile/status/' + userId);\r\n    },\r\n\r\n    putStatus(status) {\r\n        return instance.put('profile/status', { status: status });\r\n    }\r\n};\r\n\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get('auth/me/', { withCredentials: true });\r\n    },\r\n\r\n    login(email, password, rememberMe = false) {\r\n        return instance.post('auth/login/', { email, password, rememberMe });\r\n    },\r\n\r\n    logout() {\r\n        return instance.delete('auth/login/');\r\n    }\r\n}","export const apiKey = 'c35b5940-b9e7-46eb-ae99-42dcc3385481';","module.exports = __webpack_public_path__ + \"static/media/preloader.447449d2.svg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { getAuthUserData } from './auth-reducer';\r\n\r\nconst INITIALIZED_SUCCESS = 'INITIALIZED_SUCCESS';\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const initializedSuccess = () => ({ type: INITIALIZED_SUCCESS });\r\n\r\nexport const initializeApp = () => (dispatch) => {\r\n    let promise = dispatch(getAuthUserData());\r\n\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(initializedSuccess());\r\n        });\r\n}\r\n\r\nexport default appReducer;","\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux';\nimport profileReducer from \"./profile-reducer\";\nimport dialogsReducer from \"./dialogs-reducer\";\nimport usersReducer from \"./users-reducer\";\nimport authReducer from \"./auth-reducer\";\nimport thunkMiddleware from \"redux-thunk\";\nimport { reducer as formReducer } from 'redux-form';\nimport appReducer from \"./app-reducer\";\n\nlet reducers = combineReducers({\n    profilePage: profileReducer,\n    dialogsPage: dialogsReducer,\n    usersPage: usersReducer,\n    auth: authReducer,\n    form: formReducer,\n    app: appReducer\n});\n\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(reducers, /* preloadedState, */ composeEnhancers(\n    applyMiddleware(thunkMiddleware)\n));\n\nwindow.__store__ = store;\n\nexport default store;","import React from 'react';\n\nimport Container from 'react-bootstrap/Container';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport { NavLink } from 'react-router-dom';\n\nconst Header = (props) => {\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"md\">\n      <Container>\n        <Navbar.Brand href=\"#home\">Social Network</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Nav className=\"mr-auto\">\n          <Nav.Item><Nav.Link as={NavLink} to=\"/\">Home</Nav.Link></Nav.Item>\n          <Nav.Link as={NavLink} to=\"/profile\">Profile</Nav.Link>\n          <Nav.Link as={NavLink} to=\"/dialogs\">Dialogs</Nav.Link>\n          <Nav.Link as={NavLink} to=\"/news\">News</Nav.Link>\n          <Nav.Link as={NavLink} to=\"/music\">Music</Nav.Link>\n          <Nav.Link as={NavLink} to=\"/users\">Users</Nav.Link>\n        </Nav>\n\n        <Navbar.Collapse className=\"justify-content-end\">\n          <Navbar.Text>\n            {props.isAuth\n              ? <>{props.login} | <NavLink to=\"/logout\">Logout</NavLink></>\n              : <NavLink to=\"/login\">Login</NavLink>\n            }\n          </Navbar.Text>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n}\n\nexport default Header;","import React from 'react';\r\nimport Header from './Header';\r\nimport { connect } from 'react-redux';\r\nimport { getAuthUserData } from '../../redux/auth-reducer';\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n});\r\n\r\nexport default connect(mapStateToProps, { getAuthUserData })(HeaderContainer);","import React, { Component, Suspense } from 'react';\nimport './App.css';\n\nimport { connect, Provider } from 'react-redux';\nimport { compose } from 'redux';\nimport { Route, withRouter, HashRouter } from 'react-router-dom';\nimport { initializeApp } from './redux/app-reducer';\nimport store from './redux/redux-store';\n\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Preloader from './components/common/Preloader/Preloader';\n\nconst Music = React.lazy(() => import('./components/Music/Music'));\nconst News = React.lazy(() => import('./components/News/News'));\nconst ProfileContainer = React.lazy(() => import(\"./components/Profile/ProfileContainer\"));\nconst DialogsContainer = React.lazy(() => import(\"./components/Dialogs/DialogsContainer\"));\nconst UsersContainer = React.lazy(() => import(\"./components/Users/UsersContainer\"));\nconst LoginPage = React.lazy(() => import('./components/Login/Login'));\nconst LogoutPage = React.lazy(() => import('./components/Login/Logout'));\n\nclass App extends Component {\n\n    componentDidMount(props) {\n        this.props.initializeApp();\n    }\n\n    render() {\n\n        if (!this.props.initialized) {\n            return <Preloader />\n        } else {\n            return (\n                <>\n                    <HeaderContainer />\n\n                    <Suspense fallback={<Preloader />}>\n                        <Route path='/dialogs' render={() => <DialogsContainer />} /> {/* exact? */}\n                        <Route path='/profile/:userId?' render={() => <ProfileContainer />} />\n                        <Route path='/music' render={() => <Music />} />\n                        <Route path='/news' render={() => <News />} />\n                        <Route path='/users' render={() => <UsersContainer />} />\n                        <Route path='/login' render={() => <LoginPage />} />\n                        <Route path='/logout' render={() => <LogoutPage />} />\n                    </Suspense>\n                </>\n            );\n        }\n    }\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        initialized: state.app.initialized\n    }\n};\n\nlet AppContainer = compose(\n    withRouter,\n    connect(mapStateToProps, { initializeApp }))(App);\n\nlet MainApp = (props) => {\n    return (\n        <HashRouter>\n            <Provider store={store}>\n                <AppContainer />\n            </Provider>\n        </HashRouter>\n    );\n}\n\nexport default MainApp;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport store from './redux/redux-store';\nimport MainApp from './App';\n\n\nlet rerenderEntireTree = () => {\n    ReactDOM.render(\n        <MainApp />, document.getElementById('root'));\n};\n\nrerenderEntireTree(store.getState());\n\nstore.subscribe(() => {\n    let state = store.getState();\n    rerenderEntireTree(state);\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { authAPI } from '../api/userAPI';\r\nimport { stopSubmit } from 'redux-form';\r\n\r\nconst SET_USER_DATA = 'test-network/auth/SET_USER_DATA';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({ type: SET_USER_DATA, payload: { userId: userId, email: email, login: login, isAuth: isAuth } });\r\n\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let response = await authAPI.me();\r\n\r\n    if (response.data.resultCode === 0) {\r\n        let { userId, login, email } = response.data.data;\r\n        dispatch(setAuthUserData(userId, login, email, true));\r\n    }\r\n};\r\n\r\nexport const login = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await authAPI.login(email, password, rememberMe);\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData());\r\n    } else {\r\n        let error = response.data.messages.length > 0 ? response.data.messages[0] : \"Some error\";\r\n        dispatch(stopSubmit(\"login\", { _error: error }))\r\n    }\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n    let response = await authAPI.logout();\r\n\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n};\r\n\r\nexport default authReducer;","import React from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport preloader from '../../../assets/preloader.svg';\r\n\r\n\r\nlet Preloader = (props) => {\r\n    return <Container>\r\n        <Row>\r\n            <Col>\r\n                <img src={preloader} alt='' />\r\n            </Col>\r\n        </Row>\r\n    </Container>\r\n}\r\n\r\nexport default Preloader;","import { userAPI, profileAPI } from '../api/userAPI';\n\nconst ADD_POST = 'ADD-POST';\nconst DELETE_POST = 'DELETE_POST';\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\nconst SET_STATUS = 'SET_STATUS';\n\nlet initialState = {\n    posts: [\n        { id: 0, message: 'Excelent!', likesCount: 4 },\n        { id: 1, message: 'Wow', likesCount: 5 },\n        { id: 2, message: 'Hi!', likesCount: 2 },\n    ],\n    friends: [\n        { id: 0, name: 'Vasya' },\n        { id: 1, name: 'Katya' },\n        { id: 2, name: 'Masha' },\n        { id: 3, name: 'Dima' },\n        { id: 4, name: 'Petya' },\n        { id: 5, name: 'Rita' },\n    ],\n    profile: null,\n    status: ''\n};\n\nconst profileReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_POST: {\n            let stateCopy = {\n                ...state,\n                posts: [...state.posts, { id: 3, message: action.newPostText, likeCount: 0 }],\n            };\n\n            return stateCopy;\n        }\n\n        case DELETE_POST: {\n            let stateCopy = {\n                ...state,\n                posts: [...state.posts.filter(p => p.id != action.postId)],\n            };\n\n            return stateCopy;\n        }\n\n        case SET_USER_PROFILE: {\n            let stateCopy = {\n                ...state,\n                profile: action.profile\n            };\n\n            return stateCopy;\n        }\n\n        case SET_STATUS: {\n            let stateCopy = {\n                ...state,\n                status: action.status\n            };\n\n            return stateCopy;\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport const addPostCreator = (newPostText) => ({ type: ADD_POST, newPostText });\nexport const deletePostCreator = (postId) => ({ type: DELETE_POST, postId: postId });\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile: profile });\nexport const setStatus = (status) => ({ type: SET_STATUS, status: status });\n\nexport const getUserProfile = (userId) => async (dispatch) => {\n    let response = await userAPI.getProfile(userId);\n\n    dispatch(setUserProfile(response.data));\n};\n\nexport const getStatus = (userId) => async (dispatch) => {\n    let response = await profileAPI.getStatus(userId);\n\n    dispatch(setStatus(response.data));\n};\n\nexport const updateStatus = (status) => async (dispatch) => {\n    let response = await profileAPI.putStatus(status);\n\n    if (response.data.resultCode === 1) {\n        dispatch(setStatus(status));\n    }\n};\n\nexport const addPost = (newPostText) => (dispatch) => {\n    dispatch(addPostCreator(newPostText));\n};\n\nexport default profileReducer;","const ADD_MESSAGE = 'ADD-MESSAGE';\n\nlet initialState = {\n    dialogs: [\n        { id: 0, name: 'Vasya' },\n        { id: 1, name: 'Katya' },\n        { id: 2, name: 'Masha' },\n        { id: 3, name: 'Dima' },\n    ],\n    messages: [\n        { id: 0, message: 'Hi!' },\n        { id: 1, message: 'Hello!' },\n        { id: 2, message: 'How are you?' },\n        { id: 3, message: 'Fine thanks.' },\n    ],\n};\n\nconst dialogsReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_MESSAGE: {\n            let stateCopy = {\n                ...state,\n                messages: [...state.messages, { id: 4, message: action.newMessageBody }]\n            };\n\n            return stateCopy;\n        }\n\n        default:\n            return state;\n    }\n};\n\nexport const addNewMessageCreator = (newMessageBody) => ({ type: ADD_MESSAGE, newMessageBody });\n\nexport default dialogsReducer;","export const updateObjectInArray = (items, itemId, objPropName, newObjProps) => {\r\n    return items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return { ...u, ...newObjProps }\r\n        }\r\n\r\n        return u;\r\n    })\r\n};","import { userAPI } from '../api/userAPI';\nimport { updateObjectInArray } from '../utils/object-helpers';\n\nconst FOLLOW = 'FOLLOW';\nconst UNFOLLOW = 'UNFOLLOW';\nconst SET_USERS = 'SET_USERS';\nconst SET_CURRENT_PAGE = 'SET_CURRENT_PAGE';\nconst SET_TOTAL_USERS_COUNT = 'SET_TOTAL_USERS_COUNT';\nconst SET_IS_FETCHING = 'SET_IS_FETCHING';\nconst SET_FOLLOWING_IN_PROGRESS = 'SET_FOLLOWING_IN_PROGRESS';\n\nlet initialState = {\n    users: [],\n    pageSize: 10,\n    totalUsersCount: 10,\n    currentPage: 1,\n    isFetching: true,\n    followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case FOLLOW:\n            return {\n                ...state,\n                users: updateObjectInArray(state.users, action.userId, 'id', { followed: true })\n            };\n\n        case UNFOLLOW:\n            return {\n                ...state,\n                users: updateObjectInArray(state.users, action.userId, 'id', { followed: false })\n            };\n\n        case SET_USERS:\n            return {\n                ...state,\n                users: action.users\n            };\n\n        case SET_CURRENT_PAGE:\n            return {\n                ...state,\n                currentPage: action.currentPage\n            };\n\n        case SET_TOTAL_USERS_COUNT:\n            return {\n                ...state,\n                totalUsersCount: action.totalUsersCount\n            };\n\n        case SET_IS_FETCHING:\n            return {\n                ...state,\n                isFetching: action.isFetching\n            };\n\n        case SET_FOLLOWING_IN_PROGRESS:\n            return {\n                ...state,\n                followingInProgress: action.isFetching\n                    ? [...state.followingInProgress, action.userId]\n                    : [...state.followingInProgress.filter(id => id !== action.userId)]\n            };\n\n        default:\n            return state;\n    }\n};\n\nconst followUnfollowFlow = async (dispatch, userId, apiMethod, actionCreator) => {\n    dispatch(setFollowingInProgress(userId, true));\n\n    let response = await apiMethod(userId);\n\n    if (response.data.resultCode == 0) {\n        dispatch(actionCreator(userId));\n    }\n\n    dispatch(setFollowingInProgress(userId, false));\n}\n\nexport const followSuccess = (userId) => ({ type: FOLLOW, userId: userId });\nexport const unfollowSuccess = (userId) => ({ type: UNFOLLOW, userId: userId });\nexport const setUsers = (users) => ({ type: SET_USERS, users: users });\nexport const setCurrentPage = (currentPage) => ({ type: SET_CURRENT_PAGE, currentPage: currentPage });\nexport const setTotalUsers = (totalUsersCount) => ({ type: SET_TOTAL_USERS_COUNT, totalUsersCount: totalUsersCount });\nexport const setIsFetching = (isFetching) => ({ type: SET_IS_FETCHING, isFetching: isFetching });\nexport const setFollowingInProgress = (userId, isFetching) => ({ type: SET_FOLLOWING_IN_PROGRESS, isFetching: isFetching, userId: userId });\n\n\nexport const requestUsers = (page, pageSize) => {\n\n    return async (dispatch) => {\n        dispatch(setIsFetching(true));\n\n        let response = await userAPI.getUsers(page, pageSize);\n\n        dispatch(setUsers(response.data.items));\n        dispatch(setTotalUsers(response.data.totalCount));\n        dispatch(setCurrentPage(page));\n        dispatch(setIsFetching(false));\n    }\n}\n\nexport const follow = (userId) => {\n    return async (dispatch) => {\n        followUnfollowFlow(dispatch, userId, userAPI.follow.bind(userAPI), followSuccess);\n    }\n}\n\nexport const unfollow = (userId) => {\n    return async (dispatch) => {\n        followUnfollowFlow(dispatch, userId, userAPI.unfollow.bind(userAPI), unfollowSuccess);\n    }\n}\n\n\nexport default usersReducer;"],"sourceRoot":""}